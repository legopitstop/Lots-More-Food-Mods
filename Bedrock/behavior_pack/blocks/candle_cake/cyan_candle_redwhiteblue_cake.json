{
    "credit": "Thanks to Legopitstop for creating the schema. https://github.com/legopitstop/JSON-Schemas",
    "format_version": "1.20.30",
    "minecraft:block": {
        "description": {
            "identifier": "morefood:cyan_candle_redwhiteblue_cake",
            "states": {
                "morefood:lit": [
                    false,
                    true
                ]
            }
        },
        "components": {
            "minecraft:loot": "loot_tables/morefood/candles/cyan_candle.json",
            "minecraft:geometry": "geometry.template_cake_with_candle",
            "minecraft:light_dampening": 0,
            "minecraft:destructible_by_explosion": {
                "explosion_resistance": 0.5
            },
            "minecraft:destructible_by_mining": {
                "seconds_to_destroy": 0.5
            },
            "minecraft:on_interact": {
                "event": "morefood:on_interact"
            },
            "minecraft:selection_box": {
                "origin": [
                    -7,
                    0,
                    -7
                ],
                "size": [
                    14,
                    8,
                    14
                ]
            },
            "minecraft:collision_box": {
                "origin": [
                    -7,
                    0,
                    -7
                ],
                "size": [
                    14,
                    8,
                    14
                ]
            }
        },
        "permutations": [
            {
                "condition": "q.block_state('morefood:lit') == false",
                "components": {
                    "minecraft:material_instances": {
                        "*": {
                            "texture": "morefood:redwhiteblue_cake_bottom",
                            "render_method": "opaque"
                        },
                        "side": {
                            "texture": "morefood:redwhiteblue_cake_side",
                            "render_method": "opaque"
                        },
                        "candle": {
                            "texture": "minecraft:cyan_candle",
                            "render_method": "opaque"
                        },
                        "top": {
                            "texture": "morefood:redwhiteblue_cake_top",
                            "render_method": "opaque"
                        },
                        "bottom": {
                            "texture": "morefood:redwhiteblue_cake_bottom",
                            "render_method": "opaque"
                        }
                    }
                }
            },
            {
                "condition": "q.block_state('morefood:lit') == true",
                "components": {
                    "minecraft:light_emission": 3,
                    "minecraft:queued_ticking": {
                        "looping": true,
                        "interval_range": [
                            4,
                            4
                        ],
                        "on_tick": {
                            "event": "morefood:flame"
                        }
                    },
                    "minecraft:material_instances": {
                        "*": {
                            "texture": "morefood:redwhiteblue_cake_bottom",
                            "render_method": "opaque"
                        },
                        "side": {
                            "texture": "morefood:redwhiteblue_cake_side",
                            "render_method": "opaque"
                        },
                        "candle": {
                            "texture": "minecraft:cyan_candle_lit",
                            "render_method": "opaque"
                        },
                        "top": {
                            "texture": "morefood:redwhiteblue_cake_top",
                            "render_method": "opaque"
                        },
                        "bottom": {
                            "texture": "morefood:redwhiteblue_cake_bottom",
                            "render_method": "opaque"
                        }
                    }
                }
            }
        ],
        "events": {
            "morefood:on_interact": {
                "sequence": [
                    {
                        "condition": "q.block_state('morefood:lit') == false && q.is_item_name_any('slot.weapon.mainhand','minecraft:flint_and_steel')",
                        "set_block_state": {
                            "morefood:lit": "true"
                        },
                        "damage": {
                            "amount": 1,
                            "type": "durability",
                            "target": "item"
                        },
                        "run_command": {
                            "target": "block",
                            "command": "playsound fire.ignite @p ~ ~ ~ 1.0 1"
                        },
                        "trigger": {
                            "event": "morefood:flame"
                        }
                    },
                    {
                        "condition": "q.block_state('morefood:lit') == false && q.is_item_name_any('slot.weapon.mainhand','minecraft:fire_charge')",
                        "decrement_stack": {},
                        "set_block_state": {
                            "morefood:lit": "true"
                        },
                        "run_command": {
                            "target": "block",
                            "command": "playsound fire.ignite @p ~ ~ ~ 1.0 1"
                        },
                        "trigger": {
                            "event": "morefood:flame"
                        }
                    },
                    {
                        "condition": "q.block_state('morefood:lit') == false && !q.is_item_name_any('slot.weapon.mainhand','minecraft:flint_and_steel') && !q.is_item_name_any('slot.weapon.mainhand','minecraft:fire_charge')",
                        "spawn_loot": {
                            "table": "loot_tables/morefood/candles/cyan_candle.json"
                        },
                        "run_command": {
                            "target": "block",
                            "command": [
                                "setblock ~ ~ ~ morefood:redwhiteblue_cake_block [\"morefood:slice\"=1]",
                                "playsound random.burp @p ~ ~ ~ 0.50",
                                "effect @s saturation 1 1 true"
                            ]
                        }
                    },
                    {
                        "condition": "q.block_state('morefood:lit') == true && !q.is_item_name_any('slot.weapon.mainhand','minecraft:flint_and_steel') && !q.is_item_name_any('slot.weapon.mainhand','minecraft:fire_charge')",
                        "set_block_state": {
                            "morefood:lit": "false"
                        },
                        "run_command": {
                            "target": "block",
                            "command": "playsound random.fizz @p ~ ~ ~ 0.50"
                        }
                    }
                ]
            },
            "morefood:flame": {
                "run_command": {
                    "target": "block",
                    "command": "particle minecraft:candle_flame_particle ~ ~0.5 ~"
                }
            }
        }
    }
}